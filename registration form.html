<html>
    <head>

        <script type="text/javascript">

function validate()
// event.preventDefault();
        var formData = readFormData();
        if (selectedRow == null){
            insertNewRecord(formData);
        }
        else{
            updateRecord(formData);
	    }
        resetForm(); 


{
                var fn = document.getElementById('f1').value;
                var ln = document.getElementById('l1').value;
                var em = document.getElementById('e1').value;
                var m = document.getElementsByName('gender').value;
                var genderNew = "";
               

                for(i = 0; i < m.length; i++) {
                if(m[i].checked){
                    genderNew = " "+m[i].value;
                }
                }
                var proffesion = document.getElementById('proffesion').value;
                var add = document.getElementById('ad').value;
                var mo = document.getElementById('mo').value;
                var up = `<button onClick="onEdit(this)">Edit</button>` ;
                var del = `<button onClick="onDelete(this)">Delete</button>`;
            
                var letters = /^[A-Za-z]+$/;
                var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;

                if (fn == '' || ln == '' || mo == '' || e1 == '') {
                    alert ("please enter details...")
                }
                else if(!letters.test(fn)) {
                    alert('First Name is incorrect must contain alphabets only');
                }
                
                else if(!letters.test(ln)) {
                    alert('Last Name is incorrect must contain alphabets only');
                }
                else if (proffesion == '') {
                    alert("Please select your designation!");
                }
                else if (add == '') {
                    alert("enter valid address details");
                }
                else if(!phoneno.test(mo)) {
                    alert('"mobile number is invalid"');
                }
               
        
                else {
                var table = `<tr>   
                                <td>${fn}</td>
                                <td>${ln}</td>
                                <td>${em}</td>
                                <td>${genderNew}</td>
                                <td>${proffesion}</td>
                                <td>${add}</td>
                                <td>${mo}</td>
                                <td>${up}</td>
                                <td>${del}</td>
                            <tr>`;

                document.getElementById("tbl").innerHTML += table;       

                }
                
                    document.getElementById('f1').value = "";
                    document.getElementById('l1').value = "";
                    document.getElementById('e1').value = "";
                    document.getElementById('proffesion').value = "";
                    document.getElementById('ad').value = "";
                    document.getElementById('mo').value = "";   
                    document.getElementById('genderNew').value = ` for(i = 0; i < m.length; i++) {
                                                                     if(!m[i].Checked){
                                                                    genderNew = " "+m[i].value;
                                                                     } `;
                       
}
                    //Retrieve the data
                    function readFormData() {
                        var formData = {};
                            formData["f1"] = document.getElementById("f1").value;
                            formData["l1"] = document.getElementById("l1").value;
                            formData["e1"] = document.getElementById("e1").value;
                            formData["proffesion"] = document.getElementById("proffesion").value;
                        return formData;
                    }

                    //Insert the data
                    function insertNewRecord(data) {
                        var table = document.getElementById("tbl").getElementsByTagName('tbody')[0];
                        var newRow = table.insertRow(table.length);
                            cell1 = newRow.insertCell(0);
		                    cell1.innerHTML = data.f1;
                            cell2 = newRow.insertCell(1);
		                    cell2.innerHTML = data.l1;
                            cell3 = newRow.insertCell(2);
		                    cell3.innerHTML = data.e1;
                            cell4 = newRow.insertCell(3);
		                    cell4.innerHTML = data.proffesion;
                            cell4 = newRow.insertCell(4);
                            cell4.innerHTML = `<button onClick="onEdit(this)">Edit</button> <button onClick="onDelete(this)">Delete</button>`;
}
                    
                    //Edit the data
                    function onEdit(td) {
                        selectedRow = td.parentElement.parentElement;
                        document.getElementById("f1").value = selectedRow.cells[0].innerHTML;
                        document.getElementById("l1").value = selectedRow.cells[1].innerHTML;
                        document.getElementById("e1").value = selectedRow.cells[2].innerHTML;
                        document.getElementById("proffesion").value = selectedRow.cells[3].innerHTML;
                    }
                    function updateRecord(formData) {
                        selectedRow.cells[0].innerHTML = formData.f1;
                        selectedRow.cells[1].innerHTML = formData.l1;
                        selectedRow.cells[2].innerHTML = formData.e1;
                        selectedRow.cells[3].innerHTML = formData.proffesion;   

                    }

                    //Delete the data
                    function onDelete(td) {
                        if (confirm('Do you want to delete this record?')) {
                            row = td.parentElement.parentElement;
                            document.getElementById('tbl').deleteRow(row.rowIndex);
                        resetForm();
                        }
                    }
                    //Reset the data
                    function resetForm() {
                        document.getElementById("f1").value = '';
                        document.getElementById("l1").value = '';
                        document.getElementById("e1").value = '';
                        document.getElementById("proffesion").value = '';
                        selectedRow = null;
                    }

               
         </script>
        <body>
            <link href="registration form.css" rel="stylesheet">

            <h1 style="text-align:center ;">REGISTRATION FORM</h1>
            <div name="form1" style="text-align:center ;">

                <lable>First Name:</lable>
                <input id="f1" type="text" placeholder="type your name.."
                    required><br>

                <label>Last Name:</label>
                <input id="l1" type="text" placeholder="type surname here"
                    required><br><br>

                <label for="email"><b>Email</b></label>
                <input id="e1" type="text" placeholder="type Email here"
                    name="email" required><br><br>

                <label>Gender:</label>
                <input type="radio" name="gender" id="gender" value="male"
                    required>
                <label for="male">male</label>
                <input type="radio" name="gender" id="gender" value="female"
                    required>
                <label for="female">female</label><br><br>


                <label>Profession</label>
                <select id="proffesion" onsubmit="Validate()">
                    <option value=""> please select </option>
                    <option value="Student">Student</option>
                    <option value="Self-employed">Self-employed</option>
                    <option value="Emplyod">Emplyod</option>
                    <option value="freelancer">freelancer</option>
                </select><br><br>


                <label>Address:</label>
                <input id="ad" type="text" placeholder="type address here"
                    required>
                <label>Mobile No:</label>
                <input id="mo" type="text" placeholder="type mobile number here"
                    required><br><br>



                <button onclick="validate()">submit</button>

                <p id="submit"></p>

                <fieldset>
                    <legend>User Details</legend>
                    <table >
                        <tr>
                            <th>Fname</th>
                            <th>Lname</th>
                            <th>Email</th>
                            <th>Gender</th>
                            <th>Proffesion</th>
                            <th>Address</th>
                            <th>Mo.No.</th>
                            <th>update</th>
                            <th>delete</th>
                        </tr>
                        <tbody id = "tbl"></tbody>


                    </table>
                </fieldset>
            </div>





        </body>
    </head>
</html>